-- 테이블을 ID 기준으로 연결
-- SALES_DATE 1월인거 거름
-- CATEGORY 그룹핑
-- SUM(SALES) 구함

SELECT
    B.CATEGORY AS CATEGORY,
    SUM(S.SALES) AS TOTAL_SALES
FROM
    BOOK B
INNER JOIN
    BOOK_SALES S ON S.BOOK_ID=B.BOOK_ID
WHERE
    MONTH(S.SALES_DATE)=1
GROUP BY
    B.CATEGORY
ORDER BY
    B.CATEGORY ASC
    
    /*
    아주 좋은 관찰입니다! 이 차이를 이해하는 것이 **"데이터의 결(Granularity)을 이해하는 핵심"**입니다.

왜 결과가 달라지는지, **시각적 시뮬레이션**을 통해 보여드릴게요.

### 1. 결정적 이유: "누구끼리 뭉칠 것인가?"

* **`GROUP BY CATEGORY`만 했을 때:**
* "책 제목이나 ID는 상관없어. 그냥 **'소설'** 딱지 붙은 애들은 다 한 바구니에 담아!"
* 결과: 소설책이 100권이든 1000권이든 **'소설'이라는 1줄**로 합쳐집니다.


* **`GROUP BY CATEGORY, BOOK_ID`를 했을 때:**
* "카테고리도 같아야 하고, **ID(책 고유 번호)도 같아야** 같은 팀이야."
* 결과: 책마다 ID가 다 다르므로, 사실상 **책 한 권 한 권의 매출**이 따로 나옵니다. 합쳐지지 않습니다.



---

### 2. 시뮬레이션 (데이터가 어떻게 변하는가)

가상의 데이터로 비교해보면 확 와닿으실 겁니다.

#### 원본 데이터 (1월 판매 기록)

| CATEGORY | BOOK_ID | SALES (판매량) |
| --- | --- | --- |
| **인문** | **1번 책** | 100 |
| **인문** | **2번 책** | 200 |
| **소설** | **3번 책** | 300 |

#### 상황 A: `GROUP BY CATEGORY` (작성하신 정답 코드)

"인문"이면 다 합쳐!

| CATEGORY | TOTAL_SALES | 비고 |
| --- | --- | --- |
| **인문** | **300** | (1번책 100 + 2번책 200) **합체됨** |
| 소설 | 300 |  |

> **결과:** 행 개수가 확 줄어듭니다. (카테고리 종류 수만큼)

#### 상황 B: `GROUP BY CATEGORY, BOOK_ID` (궁금해하신 상황)

"인문"이면서 "1번 책"인 애들만 합쳐! (근데 1번 책은 하나밖에 없음)

| CATEGORY | BOOK_ID | TOTAL_SALES | 비고 |
| :--- | :--- | :--- |
| 인문 | 1번 책 | 100 | **안 합쳐짐** |
| 인문 | 2번 책 | 200 | **안 합쳐짐** |
| 소설 | 3번 책 | 300 | |

> **결과:** 행 개수가 줄어들지 않고 책 개수만큼 나옵니다.

---

### 3. 결론

문제에서 요구한 것은 **"카테고리(경제, 인문, 소설...) 별로 총 얼마 팔렸나"**였죠?
그래서 **`BOOK_ID`를 넣으면 안 됩니다.** 넣는 순간 그룹이 너무 잘게 쪼개져서 "카테고리 전체 합계"가 아니라 "각 책의 합계"가 되어버리기 때문입니다.

**파트너의 요약:**

* **`GROUP BY` 컬럼이 적을수록:** 덩어리가 커진다 (크게 크게 묶음 -> 행 개수 적음)
* **`GROUP BY` 컬럼이 많을수록:** 덩어리가 잘게 쪼개진다 (깐깐하게 묶음 -> 행 개수 많음)

이 차이가 이해되시나요?*/